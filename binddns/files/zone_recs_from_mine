{%- if ttl is not defined -%}
  {%- set ittl = ' ' -%}
{%- else -%}
  {%- set ittl = ' ' ~ ttl ~ ' ' -%}
{%- endif -%}

; A records auto-generated by Salt Mine for zone {{ name }}
{%- set addrs = salt['mine.get']('*.{{ name }}', 'network.ip_addrs') %}

{%- if addrs is defined %}

{%- for node, addrlist in addrs.items() -%}
{{ addrlist|first() }} {{ ittl }} IN A {{ node }}
{%- endfor -%}
{%- endif -%}
